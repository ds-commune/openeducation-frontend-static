<script lang="ts">
  import { Crisis, QuizCard, Summary } from "../../components";

  // Collider state - simple merge demo
  let isMerged = $state(false);
  const gemsA = 3;
  const gemsB = 2;
  const total = gemsA + gemsB;

  function toggleMerge() {
    isMerged = !isMerged;
  }

  // Number line state
  let segmentA = $state(3);
  let segmentB = $state(2);
</script>

<svelte:head>
  <meta
    name="description"
    content="–£—Ä–æ–∫ –æ —Å–ª–æ–∂–µ–Ω–∏–∏ –∫–∞–∫ —Å–ª–∏—è–Ω–∏–∏ –¥–≤—É—Ö –º–∏—Ä–æ–≤. –£—á–∏–º—Å—è –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ —Å–ª–æ–∂–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–π."
  />
</svelte:head>

<!-- –ö—Ä—é—á–æ–∫: –ü—Ä–æ–±–ª–µ–º–∞ –¥–≤—É—Ö –∫–∞—Ä–º–∞–Ω–æ–≤ -->
<section id="two-pockets">
  <Crisis icon="üîÆ" title="–ü—Ä–æ–±–ª–µ–º–∞ –¥–≤—É—Ö –∫–∞—Ä–º–∞–Ω–æ–≤">
    <p>
      –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ: –≤—ã ‚Äî –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å –∫–æ—Å–º–æ—Å–∞. –ù–∞ –ø–ª–∞–Ω–µ—Ç–µ –ê –≤—ã –Ω–∞—à–ª–∏
      <strong>3 —Å–∏–Ω–∏—Ö –∫—Ä–∏—Å—Ç–∞–ª–ª–∞</strong>. –ù–∞ –ø–ª–∞–Ω–µ—Ç–µ –ë ‚Äî
      <strong>2 –∫—Ä–∞—Å–Ω—ã—Ö –∫—Ä–∏—Å—Ç–∞–ª–ª–∞</strong>. –í—Å–µ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω
      –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ—Ä–∞–±–ª—è, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫—Ä—ã—Ç –∏ –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–µ–Ω.
    </p>

    <div class="scenario">
      <div class="planet planet-a">
        <span class="label">–ü–ª–∞–Ω–µ—Ç–∞ –ê</span>
        <div class="crystals blue">üíéüíéüíé</div>
      </div>
      <div class="arrow">‚û°Ô∏è</div>
      <div class="container">
        <span class="label">–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä</span>
        <div class="box">‚ùì</div>
      </div>
      <div class="arrow">‚¨ÖÔ∏è</div>
      <div class="planet planet-b">
        <span class="label">–ü–ª–∞–Ω–µ—Ç–∞ –ë</span>
        <div class="crystals red">üî∫üî∫</div>
      </div>
    </div>

    <blockquote>
      –ö–æ—Ä–∞–±–µ–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä —Ç—Ä–µ–±—É–µ—Ç –≤–≤–µ—Å—Ç–∏ —Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤, —á—Ç–æ–±—ã
      —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ç–æ–ø–ª–∏–≤–æ –¥–ª—è –≤–∑–ª—ë—Ç–∞. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ–ª—å–∑—è. –ö–∞–∫ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å
      —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—è –æ–±—ä–µ–∫—Ç—ã –∑–∞–Ω–æ–≤–æ?
    </blockquote>
  </Crisis>
</section>

<!-- –ú–µ—Ç–∞—Ñ–æ—Ä–∞ —Å–ª–∏—è–Ω–∏—è -->
<section id="merging-worlds">
  <h2>–°–ª–∏—è–Ω–∏–µ –º–∏—Ä–æ–≤</h2>
  <p>
    –ú—ã –≤–≤–æ–¥–∏–º –ø–æ–Ω—è—Ç–∏–µ <strong>—Å–ª–æ–∂–µ–Ω–∏—è</strong> –Ω–µ –∫–∞–∫ ¬´—Å—á—ë—Ç –ø–∞–ª—å—Ü–µ–≤¬ª, –∞ –∫–∞–∫
    —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å <strong>—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü</strong> –º–µ–∂–¥—É –¥–≤—É–º—è –º–∏—Ä–∞–º–∏.
  </p>

  <div class="visual">
    <div class="description">
      –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –¥–≤–∞ –º—ã–ª—å–Ω—ã—Ö –ø—É–∑—ã—Ä—è, –ª–µ—Ç—è—â–∏—Ö –Ω–∞–≤—Å—Ç—Ä–µ—á—É –¥—Ä—É–≥ –¥—Ä—É–≥—É. –ö–æ–≥–¥–∞ –æ–Ω–∏
      –∫–∞—Å–∞—é—Ç—Å—è, –≥—Ä–∞–Ω–∏—Ü—ã —Ä–∞—Å—Ç–≤–æ—Ä—è—é—Ç—Å—è ‚Äî –∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π –ø—É–∑—ã—Ä—å. –û–±—ä–µ–∫—Ç—ã
      –≤–Ω—É—Ç—Ä–∏ –Ω–µ –∏—Å—á–µ–∑–∞—é—Ç, –∞ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è.
    </div>
  </div>

  <p>
    –ó–Ω–∞–∫ <strong>¬´+¬ª</strong> ‚Äî —ç—Ç–æ –Ω–µ –∫–æ–º–∞–Ω–¥–∞ ¬´—Å—á–∏—Ç–∞–π¬ª. –≠—Ç–æ
    <strong>–∫–ª–µ–π</strong> –∏–ª–∏ <strong>–º–æ—Å—Ç</strong>, –∫–æ—Ç–æ—Ä—ã–π –≥–æ–≤–æ—Ä–∏—Ç: ¬´–†–∞–∑—Ä—É—à—å
    —Å—Ç–µ–Ω—ã –º–µ–∂–¥—É —ç—Ç–∏–º–∏ –∫–æ–º–Ω–∞—Ç–∞–º–∏ –∏ —Å–¥–µ–ª–∞–π –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π –∑–∞–ª¬ª.
  </p>
</section>

<!-- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤: –ö–æ–ª–ª–∞–π–¥–µ—Ä –º–Ω–æ–∂–µ—Å—Ç–≤ -->
<section id="collider">
  <h2>–ö–æ–ª–ª–∞–π–¥–µ—Ä –º–Ω–æ–∂–µ—Å—Ç–≤</h2>
  <p>
    –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –¥–≤–µ –≥—Ä—É–ø–ø—ã –≤ –æ–¥–Ω—É. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
    —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è ‚Äî –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏—Ö —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ.
  </p>

  <div class="demo">
    {#if !isMerged}
      <!-- –†–∞–∑–¥–µ–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã -->
      <div class="row">
        <div class="group group-a">
          <span class="title">–ì—Ä—É–ø–ø–∞ –ê</span>
          <div class="gems">
            {#each Array(gemsA) as _}
              <span class="gem">üíé</span>
            {/each}
          </div>
          <span class="count">{gemsA} —à—Ç—É–∫–∏</span>
        </div>

        <span class="sign">+</span>

        <div class="group group-b">
          <span class="title">–ì—Ä—É–ø–ø–∞ –ë</span>
          <div class="gems">
            {#each Array(gemsB) as _}
              <span class="gem">üî∫</span>
            {/each}
          </div>
          <span class="count">{gemsB} —à—Ç—É–∫–∏</span>
        </div>
      </div>
    {:else}
      <!-- –û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∞ -->
      <div class="merged">
        <span class="title">–û–±—â–∞—è –≥—Ä—É–ø–ø–∞</span>
        <div class="gems">
          {#each Array(gemsA) as _}
            <span class="gem">üíé</span>
          {/each}
          {#each Array(gemsB) as _}
            <span class="gem">üî∫</span>
          {/each}
        </div>
        <span class="count">{total} —à—Ç—É–∫</span>
      </div>
    {/if}

    <button class="toggle-btn" onclick={toggleMerge}>
      {#if !isMerged}
        –û–±—ä–µ–¥–∏–Ω–∏—Ç—å ‚Üí
      {:else}
        ‚Üê –†–∞–∑–¥–µ–ª–∏—Ç—å
      {/if}
    </button>
  </div>

  <!-- –£—Ä–∞–≤–Ω–µ–Ω–∏–µ -->
  <div class="equation">
    <span class="num">{gemsA}</span>
    <span class="sign">+</span>
    <span class="num">{gemsB}</span>
    <span class="sign">=</span>
    <span class="total">{total}</span>
  </div>
</section>

<!-- –ß–∏—Å–ª–æ–≤–∞—è –ø—Ä—è–º–∞—è -->
<section id="number-line">
  <h2>–õ–∏–Ω–∏—è –∂–∏–∑–Ω–∏</h2>
  <p>
    –°–ª–æ–∂–µ–Ω–∏–µ ‚Äî —ç—Ç–æ <strong>–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø—É—Ç–∏</strong>. –í—Ç–æ—Ä–æ–π –æ—Ç—Ä–µ–∑–æ–∫ –Ω–µ
    –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω—É–ª—è ‚Äî –æ–Ω –ø—Ä–∏—Å—Ç—ã–∫–æ–≤—ã–≤–∞–µ—Ç—Å—è –∫ –∫–æ–Ω—Ü—É –ø–µ—Ä–≤–æ–≥–æ.
  </p>

  <div class="demo">
    <div class="controls">
      <div class="input-group">
        <label for="segment-a">–ü–µ—Ä–≤—ã–π –æ—Ç—Ä–µ–∑–æ–∫:</label>
        <input
          id="segment-a"
          type="range"
          bind:value={segmentA}
          min="1"
          max="5"
          aria-label="–î–ª–∏–Ω–∞ –ø–µ—Ä–≤–æ–≥–æ –æ—Ç—Ä–µ–∑–∫–∞"
        />
        <span class="value">{segmentA}</span>
      </div>
      <div class="input-group">
        <label for="segment-b">–í—Ç–æ—Ä–æ–π –æ—Ç—Ä–µ–∑–æ–∫:</label>
        <input
          id="segment-b"
          type="range"
          bind:value={segmentB}
          min="1"
          max="5"
          aria-label="–î–ª–∏–Ω–∞ –≤—Ç–æ—Ä–æ–≥–æ –æ—Ç—Ä–µ–∑–∫–∞"
        />
        <span class="value">{segmentB}</span>
      </div>
    </div>

    <div class="line">
      <div class="axis">
        {#each Array(11) as _, i}
          <div class="tick" style="left: {i * 10}%">
            <span class="label">{i}</span>
          </div>
        {/each}
      </div>
      <div class="segment segment-a" style="width: {segmentA * 10}%">
        <span class="label">{segmentA}</span>
      </div>
      <div
        class="segment segment-b"
        style="left: {segmentA * 10}%; width: {segmentB * 10}%"
      >
        <span class="join">+</span>
        <span class="label">{segmentB}</span>
      </div>
      <div class="result" style="left: {(segmentA + segmentB) * 10}%">
        <span class="value">{segmentA + segmentB}</span>
      </div>
    </div>
  </div>
</section>

<section id="math-language">
  <h2>–Ø–∑—ã–∫ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏</h2>
  <p>–¢–æ, —á—Ç–æ –º—ã –≤–∏–¥–µ–ª–∏ –≤ —Å–∏–º—É–ª—è—Ü–∏–∏, –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Ç–∞–∫:</p>

  <div class="breakdown">
    <div class="main">3 + 2 = 5</div>
    <div class="parts">
      <div class="part">
        <span class="symbol">3</span> –∏
        <span class="symbol">2</span>
        <span class="desc">‚Äî —Å–ª–∞–≥–∞–µ–º—ã–µ (–∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã, —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–æ —Å–ª–∏—è–Ω–∏—è)</span
        >
      </div>
      <div class="part">
        <span class="symbol">+</span>
        <span class="desc">‚Äî —Å–∞–º –ø—Ä–æ—Ü–µ—Å—Å —Å–ª–∏—è–Ω–∏—è (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫ –¥–µ–π—Å—Ç–≤–∏—é)</span>
      </div>
      <div class="part">
        <span class="symbol">=</span>
        <span class="desc"
          >‚Äî –º–æ–º–µ–Ω—Ç –∏—Å—Ç–∏–Ω—ã (–ª–µ–≤–∞—è –∏ –ø—Ä–∞–≤–∞—è —á–∞—Å—Ç–∏ —Ä–∞–≤–Ω–æ—Ü–µ–Ω–Ω—ã)</span
        >
      </div>
      <div class="part">
        <span class="symbol">5</span>
        <span class="desc">‚Äî —Å—É–º–º–∞ (–Ω–æ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Å–ª–µ)</span>
      </div>
    </div>
  </div>
</section>

<!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–Ω–∏–º–∞–Ω–∏—è -->
<section id="practice">
  <h2>–ü—Ä–æ–≤–µ—Ä—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ</h2>

  <div class="quiz-grid">
    <QuizCard icon="üèñÔ∏è">
      <div class="question">
        –ï—Å–ª–∏ –º—ã —Å–ª–∏–ª–∏ –¥–≤–µ –∫—É—á–∏ –ø–µ—Å–∫–∞ –≤ –æ–¥–Ω—É, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Å—á–∏–Ω–æ–∫ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å? –ê
        –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—É—á?
      </div>
      {#snippet answer()}
        <p>
          –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Å—á–∏–Ω–æ–∫ <strong>–Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å</strong> ‚Äî –æ–Ω–∏ –≤—Å–µ –Ω–∞ –º–µ—Å—Ç–µ. –ê
          –≤–æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—É—á —É–º–µ–Ω—å—à–∏–ª–æ—Å—å: –±—ã–ª–æ –¥–≤–µ, —Å—Ç–∞–ª–∞ –æ–¥–Ω–∞.
        </p>
      {/snippet}
    </QuizCard>

    <QuizCard icon="üçé">
      <div class="question">
        –î–∞–Ω—ã —Ç—Ä–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏: –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —è–±–ª–æ–∫–∞, —è–±–ª–æ—á–Ω–æ–µ –ø—é—Ä–µ, –¥–≤–∞ —è–±–ª–æ–∫–∞ –≤
        –æ–¥–Ω–æ–π –∫–æ—Ä–∑–∏–Ω–µ. –ö–∞–∫–∞—è –ª—É—á—à–µ –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ª–æ–∂–µ–Ω–∏–µ?
      </div>
      {#snippet answer()}
        <p>
          <strong>–ö–æ—Ä–∑–∏–Ω–∞ —Å —è–±–ª–æ–∫–∞–º–∏</strong>. –°–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç
          –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ—Å—Ç—å –æ–±—ä–µ–∫—Ç–æ–≤, –Ω–æ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∏—Ö –≤ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ. –ü—é—Ä–µ ‚Äî —ç—Ç–æ
          –Ω–µ —Å–ª–æ–∂–µ–Ω–∏–µ, –∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è.
        </p>
      {/snippet}
    </QuizCard>

    <QuizCard icon="‚è∞">
      <div class="question">–ú–æ–∂–Ω–æ –ª–∏ —Å–ª–æ–∂–∏—Ç—å 2 —è–±–ª–æ–∫–∞ –∏ 3 —á–∞—Å–∞ –≤—Ä–µ–º–µ–Ω–∏?</div>
      {#snippet answer()}
        <p>
          <strong>–ù–µ—Ç</strong>. –î–ª—è —Å–ª–∏—è–Ω–∏—è –º–∏—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º—ã. –Ø–±–ª–æ–∫–∏
          –∏ —á–∞—Å—ã ‚Äî —Ä–∞–∑–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏.
        </p>
      {/snippet}
    </QuizCard>
  </div>
</section>

<section id="summary">
  <Summary title="–†–µ–∑—é–º–µ">
    <blockquote>
      –°–ª–æ–∂–µ–Ω–∏–µ (+) ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∏—Å–ª–∞. –≠—Ç–æ
      <strong>–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–≤—É—Ö —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏–π –≤ –æ–¥–Ω—É</strong>. –ö–æ–≥–¥–∞ –º—ã –ø–∏—à–µ–º 2
      + 3, –º—ã —Å—Ç—Ä–æ–∏–º –º–æ—Å—Ç –º–µ–∂–¥—É –¥–≤—É–º—è –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏, –ø—Ä–µ–≤—Ä–∞—â–∞—è –∏—Ö –≤ –µ–¥–∏–Ω–æ–µ
      —Ü–µ–ª–æ–µ, —Ä–∞–≤–Ω–æ–µ 5.
    </blockquote>
  </Summary>
</section>

<style>
  #two-pockets {
    .scenario {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin: 2rem 0;
      flex-wrap: wrap;

      .planet {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1.25rem 1.5rem;
        background: var(--color-surface-50);
        border-radius: var(--radius-container);
        box-shadow: 0 4px 12px
          color-mix(in oklab, var(--color-surface-950) 0.08, transparent);

        .label {
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--color-surface-600);
          margin-bottom: 0.5rem;
        }

        .crystals {
          font-size: 1.5rem;
          letter-spacing: 0.25rem;
        }
      }

      .container {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1.5rem 2rem;
        background: var(--color-surface-200);
        border-radius: var(--radius-container);
        border: 3px dashed var(--color-surface-400);

        .label {
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--color-surface-600);
          margin-bottom: 0.5rem;
        }

        .box {
          font-size: 2rem;
        }
      }

      .arrow {
        font-size: 1.5rem;
        color: var(--color-surface-400);
      }
    }
  }

  #merging-worlds {
    .visual {
      margin: 2rem 0;
      padding: 2rem;
      background: var(--color-primary-50);
      border-radius: calc(var(--radius-container) * 2);
      border: 2px solid var(--color-primary-200);

      .description {
        font-size: 1.25rem;
        line-height: 1.7;
        color: var(--color-surface-700);
        text-align: center;
      }
    }
  }

  #collider {
    .demo {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
      margin: 2rem 0;
      padding: 2.5rem;
      background: var(--color-surface-100);
      border-radius: calc(var(--radius-container) * 2);

      .row {
        display: flex;
        align-items: center;
        gap: 2rem;
        flex-wrap: wrap;
        justify-content: center;
      }

      .group {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
        padding: 2rem;
        background: var(--color-surface-50);
        border-radius: calc(var(--radius-container) * 2);
        box-shadow: 0 4px 12px
          color-mix(in oklab, var(--color-surface-950) 0.08, transparent);
        min-width: 160px;

        &.group-a {
          border: 3px solid var(--color-primary-400);
        }

        &.group-b {
          border: 3px solid var(--color-error-400);
        }

        .title {
          font-size: 1.375rem;
          font-weight: 600;
          color: var(--color-surface-800);
        }

        .gems {
          display: flex;
          gap: 0.75rem;
          flex-wrap: wrap;
          justify-content: center;

          .gem {
            font-size: 2.5rem;
            line-height: 1;
          }
        }

        .count {
          font-size: 1.25rem;
          font-weight: 600;
          color: var(--color-surface-600);
        }
      }

      .sign {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--color-primary-600);
      }

      .merged {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
        padding: 2.5rem 3rem;
        background: linear-gradient(
          135deg,
          var(--color-primary-100) 0%,
          var(--color-error-100) 100%
        );
        border-radius: calc(var(--radius-container) * 2);
        box-shadow: 0 12px 32px
          color-mix(in oklab, var(--color-surface-900) 0.12, transparent);
        border: 3px solid var(--color-warning-400);

        .title {
          font-size: 1.375rem;
          font-weight: 600;
          color: var(--color-surface-800);
        }

        .gems {
          display: flex;
          gap: 0.75rem;
          flex-wrap: wrap;
          justify-content: center;

          .gem {
            font-size: 2.5rem;
            line-height: 1;
          }
        }

        .count {
          font-size: 1.25rem;
          font-weight: 600;
          color: var(--color-surface-600);
        }
      }

      .toggle-btn {
        padding: 1rem 2.5rem;
        font-size: 1.375rem;
        font-weight: 600;
        border: none;
        border-radius: calc(var(--radius-container) * 2);
        background: var(--color-primary-500);
        color: var(--color-primary-contrast-500);
        cursor: pointer;
        transition: all 0.2s ease;

        &:hover {
          background: var(--color-primary-600);
          transform: translateY(-2px);
          box-shadow: 0 4px 12px
            color-mix(in oklab, var(--color-primary-900) 0.2, transparent);
        }
      }
    }

    .equation {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin-top: 1.5rem;
      padding: 1.5rem 2rem;
      background: var(--color-success-100);
      border-radius: calc(var(--radius-container) * 2);

      .num {
        font-size: 2rem;
        font-weight: 700;
        color: var(--color-surface-800);
      }

      .sign {
        font-size: 2rem;
        font-weight: 700;
        color: var(--color-primary-600);
      }

      .total {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--color-success-700);
      }
    }
  }

  #number-line {
    .demo {
      margin: 2rem 0;
      padding: 2rem;
      background: var(--color-surface-50);
      border-radius: calc(var(--radius-container) * 2);
      box-shadow: 0 4px 12px
        color-mix(in oklab, var(--color-surface-950) 0.08, transparent);

      .controls {
        display: flex;
        gap: 2rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;

        .input-group {
          display: flex;
          align-items: center;
          gap: 1rem;

          label {
            font-size: 1rem;
            font-weight: 600;
            color: var(--color-surface-600);
          }

          input[type="range"] {
            width: 120px;
            accent-color: var(--color-primary-500);
          }

          .value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--color-primary-700);
            min-width: 24px;
            text-align: center;
          }
        }
      }

      .line {
        position: relative;
        height: 80px;
        margin: 2rem 0;

        .axis {
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          height: 2px;
          background: var(--color-surface-400);

          .tick {
            position: absolute;
            bottom: 0;
            transform: translateX(-50%);

            &::before {
              content: "";
              display: block;
              width: 2px;
              height: 12px;
              background: var(--color-surface-400);
              margin: 0 auto;
            }

            .label {
              display: block;
              font-size: 0.875rem;
              color: var(--color-surface-600);
              margin-top: 4px;
              text-align: center;
            }
          }
        }

        .segment {
          position: absolute;
          bottom: 20px;
          height: 24px;
          border-radius: 4px;
          display: flex;
          align-items: center;
          justify-content: center;

          &.segment-a {
            left: 0;
            background: var(--color-primary-400);
          }

          &.segment-b {
            background: var(--color-warning-400);
          }

          .label {
            font-size: 0.875rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
          }

          .join {
            position: absolute;
            left: -8px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            background: var(--color-primary-600);
            color: white;
            border-radius: 50%;
            font-size: 0.75rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
          }
        }

        .result {
          position: absolute;
          bottom: 50px;
          transform: translateX(-50%);

          .value {
            display: block;
            padding: 0.25rem 0.75rem;
            background: var(--color-success-600);
            color: white;
            border-radius: var(--radius-container);
            font-weight: 700;
            font-size: 1rem;

            &::after {
              content: "";
              position: absolute;
              top: 100%;
              left: 50%;
              transform: translateX(-50%);
              border: 6px solid transparent;
              border-top-color: var(--color-success-600);
            }
          }
        }
      }
    }
  }

  #math-language {
    .breakdown {
      margin: 2rem 0;
      padding: 2rem;
      background: var(--color-surface-50);
      border-radius: calc(var(--radius-container) * 2);
      box-shadow: 0 4px 12px
        color-mix(in oklab, var(--color-surface-950) 0.08, transparent);

      .main {
        font-size: 2.5rem;
        font-weight: 700;
        font-family: "Consolas", "Monaco", monospace;
        text-align: center;
        color: var(--color-primary-700);
        margin-bottom: 2rem;
        padding-bottom: 1.5rem;
        border-bottom: 2px solid var(--color-surface-200);
      }

      .parts {
        display: grid;
        gap: 1rem;

        .part {
          display: flex;
          align-items: baseline;
          gap: 0.5rem;
          padding: 0.75rem 1rem;
          background: var(--color-surface-100);
          border-radius: var(--radius-container);
          flex-wrap: wrap;

          .symbol {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: "Consolas", "Monaco", monospace;
            color: var(--color-primary-600);
          }

          .desc {
            font-size: 1.125rem;
            color: var(--color-surface-700);
          }
        }
      }
    }
  }

  #practice {
    .quiz-grid {
      display: grid;
      gap: 1.5rem;

      .question {
        font-size: 1.25rem;
        line-height: 1.6;
        color: var(--color-surface-800);
        margin-bottom: 1rem;
      }
    }
  }

  /* Responsive */
  @media (max-width: 1100px) {
    #two-pockets {
      .scenario {
        flex-direction: column;
      }
    }

    #collider {
      .demo {
        .row {
          flex-direction: column;
        }
      }
    }

    #number-line {
      .demo {
        .controls {
          flex-direction: column;
          gap: 1rem;
        }
      }
    }
  }
</style>
