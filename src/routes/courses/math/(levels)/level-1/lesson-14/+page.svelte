<script lang="ts">
  import {
    Crisis,
    DefinitionCard,
    QuizCard,
    Summary,
    TakeawayCard,
  } from "../../components";

  let crusherInput = $state(7);
  let crusherRule = $state("√ó2");
  const crusherOutput = $derived(() => {
    if (crusherRule === "√ó2") return crusherInput * 2;
    if (crusherRule === "+8") return crusherInput + 8;
    if (crusherRule === "-3") return crusherInput - 3;
    return crusherInput;
  });
</script>

<svelte:head>
  <meta
    name="description"
    content="–£—Ä–æ–∫ –æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ. –£—á–∏–º—Å—è –ø–æ–Ω–∏–º–∞—Ç—å –±—É–∫–≤—ã –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π."
  />
</svelte:head>

<!-- –ö—Ä—é—á–æ–∫: –ü—Ä–æ–±–ª–µ–º–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
<section id="infinite-instruction">
  <Crisis icon="üé´" title="–ü—Ä–æ–±–ª–µ–º–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏">
    <p>
      –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ: –≤—ã ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—â–∏–π —É–º–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç –ø–æ –ø—Ä–æ–¥–∞–∂–µ
      –±–∏–ª–µ—Ç–æ–≤ –≤ –º–µ—Ç—Ä–æ. –ü—Ä–∞–≤–∏–ª–æ –ø—Ä–æ—Å—Ç–æ–µ: –∫ —Ü–µ–Ω–µ –ª—é–±–æ–π –ø–æ–µ–∑–¥–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è
      —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä ‚Äî 4 –º–æ–Ω–µ—Ç—ã.
    </p>

    <div class="examples">
      <div class="row">
        <span class="input">10</span>
        <span class="arrow">‚Üí</span>
        <span class="output">10 + 4</span>
      </div>
      <div class="row">
        <span class="input">20</span>
        <span class="arrow">‚Üí</span>
        <span class="output">20 + 4</span>
      </div>
      <div class="row">
        <span class="input">100</span>
        <span class="arrow">‚Üí</span>
        <span class="output">100 + 4</span>
      </div>
      <div class="row endless">
        <span class="input">???</span>
        <span class="arrow">‚Üí</span>
        <span class="output">??? + 4</span>
      </div>
    </div>

    <blockquote>
      –¶–µ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—ã—Å—è—á–∏. –ï—Å–ª–∏ –º—ã –Ω–∞–ø–∏—à–µ–º –º–∏–ª–ª–∏–æ–Ω —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
      –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ —á–∏—Å–ª–∞ ‚Äî –∏ —Ü–µ–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è ‚Äî –ø—Ä–∏–¥—ë—Ç—Å—è –≤—Å—ë –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å. –ö–∞–∫
      –∑–∞–ø–∏—Å–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è <em>–ª—é–±–æ–≥–æ</em> —á–∏—Å–ª–∞?
    </blockquote>
  </Crisis>
</section>

<!-- –ú–µ—Ç–∞—Ñ–æ—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ -->
<section id="container-metaphor">
  <h2>–ú–µ—Ç–∞—Ñ–æ—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</h2>
  <p>
    –†–µ—à–µ–Ω–∏–µ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ: –º—ã –Ω–µ –ø–∏—à–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —á–∏—Å–ª–æ. –ú—ã —Å—Ç–∞–≤–∏–º
    <strong>–∫–æ—Ä–æ–±–∫—É</strong>, –≤ –∫–æ—Ç–æ—Ä—É—é –ø–∞—Å—Å–∞–∂–∏—Ä –ø–æ–ª–æ–∂–∏—Ç —Å–≤–æ—ë —á–∏—Å–ª–æ –ø–æ–∑–∂–µ. –í
    –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è <strong>–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è</strong> ‚Äî –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ
    –ø–æ–¥ –±—É–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
  </p>

  <div class="visual">
    <div class="stage">
      <div class="box-wrapper">
        <div class="box">
          <span class="label">–¶–µ–Ω–∞ –±–∏–ª–µ—Ç–∞</span>
          <span class="symbol">‚ñ°</span>
        </div>
      </div>
      <div class="arrow">‚Üí</div>
    </div>

    <div class="stage">
      <div class="machine">
        <span class="label">+ 4 –º–æ–Ω–µ—Ç—ã</span>
        <span class="icon">‚öôÔ∏è</span>
      </div>
      <div class="arrow">‚Üí</div>
    </div>

    <div class="stage">
      <div class="result">
        <span class="formula">‚ñ° + 4</span>
        <span class="label">–ò—Ç–æ–≥–æ</span>
      </div>
    </div>
  </div>

  <TakeawayCard>
    –ö–æ—Ä–æ–±–∫–∞ ‚Äî —ç—Ç–æ <strong>–æ–±–µ—â–∞–Ω–∏–µ</strong>. –ú—ã –Ω–µ –∑–Ω–∞–µ–º, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏, –Ω–æ –∑–Ω–∞–µ–º,
    —á—Ç–æ —Å –Ω–µ–π —Å–¥–µ–ª–∞—Ç—å. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –æ–¥–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –≤–º–µ—Å—Ç–æ –º–∏–ª–ª–∏–æ–Ω–∞.
  </TakeawayCard>
</section>

<!-- –î–µ—Ç–µ–∫—Ç–∏–≤: –æ–±—Ä–∞—Ç–Ω–∞—è –∑–∞–¥–∞—á–∞ -->
<section id="detective-math">
  <h2>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∫–∞–∫ –¥–µ—Ç–µ–∫—Ç–∏–≤</h2>
  <p>
    –¢–µ–ø–µ—Ä—å —Å–∏—Ç—É–∞—Ü–∏—è –º–µ–Ω—è–µ—Ç—Å—è. –ú—ã –≤–∏–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–æ –Ω–µ –≤–∏–¥–µ–ª–∏ –Ω–∞—á–∞–ª–∞. –ò–∑
    –∞–≤—Ç–æ–º–∞—Ç–∞ –≤—ã–∫–∞—Ç–∏–ª–∞—Å—å –∫–æ—Ä–æ–±–∫–∞ —Å –æ–±—â–∏–º –≤–µ—Å–æ–º <strong>17 –º–æ–Ω–µ—Ç</strong>. –ú—ã
    –∑–Ω–∞–µ–º, —á—Ç–æ –∞–≤—Ç–æ–º–∞—Ç <em>–≤—Å–µ–≥–¥–∞</em> –¥–æ–±–∞–≤–ª—è–µ—Ç 6.
  </p>

  <div class="scenario">
    <div class="card">
      <div class="icon">üîç</div>
      <div class="content">
        <div class="title">–£–ª–∏–∫–∞</div>
        <div class="data">–ò—Ç–æ–≥–æ: 17 –º–æ–Ω–µ—Ç</div>
      </div>
    </div>

    <div class="arrow">‚Üí</div>

    <div class="card">
      <div class="icon">‚öôÔ∏è</div>
      <div class="content">
        <div class="title">–ò–∑–≤–µ—Å—Ç–Ω–æ</div>
        <div class="data">–î–æ–±–∞–≤–ª–µ–Ω–æ: 6</div>
      </div>
    </div>

    <div class="arrow">‚Üí</div>

    <div class="card solved">
      <div class="icon">üí°</div>
      <div class="content">
        <div class="title">–í—ã–≤–æ–¥</div>
        <div class="data">–ë—ã–ª–æ: 17 ‚àí 6 = 11</div>
      </div>
    </div>
  </div>

  <p>
    –≠—Ç–æ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ. –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –º—ã ¬´–æ—Ç–º–∞—Ç—ã–≤–∞–µ–º –≤—Ä–µ–º—è –Ω–∞–∑–∞–¥¬ª ‚Äî
    —Å–Ω–∏–º–∞–µ–º (–≤—ã—á–∏—Ç–∞–µ–º) —Ç–æ, —á—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ.
  </p>
</section>

<!-- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –¥—Ä–æ–±–∏–ª–∫–∞ -->
<section id="universal-crusher">
  <h2>–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –¥—Ä–æ–±–∏–ª–∫–∞</h2>
  <p>
    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–æ —Å —Ä–∞–∑–Ω—ã–º–∏ –≤—Ö–æ–¥–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. –ö–æ—Ä–æ–±–∫–∞
    <span class="symbol">‚ñ°</span> ‚Äî —ç—Ç–æ –º–µ—Å—Ç–æ –¥–ª—è –ª—é–±–æ–≥–æ —á–∏—Å–ª–∞.
  </p>

  <div class="demo">
    <div class="input-group">
      <label for="crusher-value">–í—Ö–æ–¥:</label>
      <input
        id="crusher-value"
        type="number"
        bind:value={crusherInput}
        min="0"
        max="100"
        aria-label="–í—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ"
      />
    </div>

    <div class="machine">
      <div class="rules">
        <button
          class="btn"
          class:active={crusherRule === "√ó2"}
          onclick={() => (crusherRule = "√ó2")}
        >
          ‚ñ° √ó 2
        </button>
        <button
          class="btn"
          class:active={crusherRule === "+8"}
          onclick={() => (crusherRule = "+8")}
        >
          ‚ñ° + 8
        </button>
        <button
          class="btn"
          class:active={crusherRule === "-3"}
          onclick={() => (crusherRule = "-3")}
        >
          ‚ñ° ‚àí 3
        </button>
      </div>
      <div class="body">‚öôÔ∏è</div>
    </div>

    <div class="output">
      <span class="label">–í—ã—Ö–æ–¥:</span>
      <span class="value">{crusherOutput()}</span>
    </div>
  </div>

  <p class="insight">
    –ó–∞–º–µ—Ç—å—Ç–µ: <strong>–ø—Ä–∞–≤–∏–ª–æ –ø–µ—Ä–≤–∏—á–Ω–æ</strong>, –∞ —á–∏—Å–ª–æ –≤—Ç–æ—Ä–∏—á–Ω–æ. –ú—ã –æ–ø–∏—Å—ã–≤–∞–µ–º,
    <em>—á—Ç–æ –¥–µ–ª–∞—Ç—å</em>, –Ω–µ –∑–Ω–∞—è –∑–∞—Ä–∞–Ω–µ–µ, <em>—Å —á–µ–º</em>.
  </p>
</section>

<section id="notation-evolution">
  <h2>–û—Ç –∫–æ—Ä–æ–±–∫–∏ –∫ –±—É–∫–≤–µ</h2>
  <p>
    –†–∏—Å–æ–≤–∞—Ç—å –∫–æ—Ä–æ–±–∫—É <span class="symbol">‚ñ°</span> –∫–∞–∂–¥—ã–π —Ä–∞–∑ –¥–æ–ª–≥–æ. –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∏
    –ª–µ–Ω–∏–≤—ã. –í–º–µ—Å—Ç–æ —Ä–∏—Å—É–Ω–∫–∞ –æ–Ω–∏ –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å —Å—Ç–∞–≤–∏—Ç—å <strong>–±—É–∫–≤—É</strong> ‚Äî
    —á–∞—â–µ –≤—Å–µ–≥–æ <em>x</em>.
  </p>

  <div class="evolution">
    <div class="step">
      <div class="old">[–ö–æ—Ä–æ–±–∫–∞] + 3 = 10</div>
      <div class="arrow">‚Üì</div>
      <div class="new">x + 3 = 10</div>
    </div>
  </div>

  <div class="reading-guide">
    <h3>–ö–∞–∫ —á–∏—Ç–∞—Ç—å</h3>
    <p>
      –ù–µ ¬´–∏–∫—Å –ø–ª—é—Å –ø—è—Ç—å¬ª. –ê:
      <strong>¬´–ù–µ—á—Ç–æ —Å–ø—Ä—è—Ç–∞–Ω–Ω–æ–µ, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ–±–∞–≤–∏–ª–∏ 5, –≤ –∏—Ç–æ–≥–µ –¥–∞–ª–æ 12¬ª</strong
      >.
    </p>
  </div>

  <DefinitionCard title="–ß—Ç–æ —Ç–∞–∫–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ?">
    <p>
      –£—Ä–∞–≤–Ω–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–∏–º–µ—Ä –¥–ª—è —Ä–µ—à–µ–Ω–∏—è. –≠—Ç–æ
      <strong>—É–ª–∏–∫–∞</strong>, –∑–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ —è–∑—ã–∫–µ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏. –†–µ—à–∏—Ç—å —É—Ä–∞–≤–Ω–µ–Ω–∏–µ ‚Äî
      –∑–Ω–∞—á–∏—Ç <em>–≤—Å–∫—Ä—ã—Ç—å –∫–æ—Ä–æ–±–∫—É</em>.
    </p>
  </DefinitionCard>
</section>

<!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–Ω–∏–º–∞–Ω–∏—è -->
<section id="practice">
  <h2>–ü—Ä–æ–≤–µ—Ä—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ</h2>

  <div class="cards">
    <QuizCard icon="üè∑Ô∏è">
      <div class="question">
        –ï—Å–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –≤ —É—Ä–∞–≤–Ω–µ–Ω–∏–∏ –±—É–∫–≤—É <em>x</em> –Ω–∞ <em>z</em> –∏–ª–∏ –Ω–∞ —Å–º–∞–π–ª–∏–∫ üòä,
        –∏–∑–º–µ–Ω–∏—Ç—Å—è –ª–∏ –æ—Ç–≤–µ—Ç?
      </div>
      {#snippet answer()}
        <p>
          –ù–µ—Ç. –ë—É–∫–≤–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ <strong>–∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</strong>. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ
          –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –Ω–∞–∑–æ–≤—ë–º –∫–æ—Ä–æ–±–∫—É.
        </p>
      {/snippet}
    </QuizCard>

    <QuizCard icon="üìù">
      <div class="question">
        –ü–æ—á–µ–º—É –∑–∞–ø–∏—Å—å <em>x + 2</em> —É–¥–æ–±–Ω–µ–µ, —á–µ–º –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ 9 –∏–ª–∏ 12?
      </div>
      {#snippet answer()}
        <p>
          –ü–æ—Ç–æ–º—É —á—Ç–æ <em>x + 2</em> –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é –¥–ª—è
          <strong>–≤—Å–µ—Ö —á–∏—Å–µ–ª —Å—Ä–∞–∑—É</strong> ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –∞ –Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
        </p>
      {/snippet}
    </QuizCard>

    <QuizCard icon="üê±">
      <div class="question">
        –ï—Å–ª–∏ <em>x</em> ‚Äî –≤–æ–∑—Ä–∞—Å—Ç –∫–æ—à–∫–∏, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç <em>x + 1</em>?
      </div>
      {#snippet answer()}
        <p>
          –í–æ–∑—Ä–∞—Å—Ç –∫–æ—à–∫–∏ <strong>—á–µ—Ä–µ–∑ –≥–æ–¥</strong>. –ê <em>x ‚àí 2</em> ‚Äî –µ—ë –≤–æ–∑—Ä–∞—Å—Ç
          –¥–≤–∞ –≥–æ–¥–∞ –Ω–∞–∑–∞–¥.
        </p>
      {/snippet}
    </QuizCard>
  </div>
</section>

<section id="summary">
  <Summary title="–†–µ–∑—é–º–µ">
    <blockquote>
      –ë—É–∫–≤–∞ –≤ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ ‚Äî —ç—Ç–æ –Ω–µ —Å—Ç—Ä–∞—à–Ω—ã–π —Å–∏–º–≤–æ–ª. –≠—Ç–æ
      <strong>–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</strong>, –æ–∂–∏–¥–∞—é—â–∏–π –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –±—É–∫–≤—ã,
      –∫–æ–≥–¥–∞ —Ö–æ—Ç–∏–º —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –¥–ª—è –≤—Å–µ—Ö —á–∏—Å–µ–ª –≤–æ –í—Å–µ–ª–µ–Ω–Ω–æ–π, –∞ –Ω–µ
      —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ. –£—Ä–∞–≤–Ω–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –ø–æ–∏—Å–∫ —Ç–æ–≥–æ, —á—Ç–æ –ª–µ–∂–∏—Ç –≤ —ç—Ç–æ–º
      –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –ø—É—Ç—ë–º –æ—Ç–º–∞—Ç—ã–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –Ω–∞–∑–∞–¥.
    </blockquote>
  </Summary>
</section>

<style>
  /* Infinite Instruction */
  #infinite-instruction {
    .examples {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin: 1.5rem 0;
      padding: 1.5rem;
      background: color-mix(
        in oklab,
        var(--color-surface-50, #f8f9fa) 80%,
        transparent
      );
      border-radius: var(--radius-container, 0.5rem);

      .row {
        display: flex;
        align-items: center;
        gap: 1rem;
        font-size: 1.25rem;
        font-family: "Consolas", "Monaco", monospace;

        .input {
          background: var(--color-surface-100, #f1f3f5);
          padding: 0.5rem 1rem;
          border-radius: calc(var(--radius-container, 0.25rem) / 2);
          min-width: 60px;
          text-align: center;
        }

        .arrow {
          color: var(--color-surface-500, #adb5bd);
        }

        .output {
          color: var(--color-primary-700, #2d5a30);
          font-weight: 600;
        }

        &.endless {
          opacity: 0.6;
          font-style: italic;
        }
      }
    }
  }

  /* Container Metaphor */
  #container-metaphor {
    .visual {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin: 2.5rem 0;
      padding: 2rem;
      background: var(--color-surface-100, #f1f3f5);
      border-radius: calc(var(--radius-container, 0.5rem) * 2);
      border: 2px solid var(--color-surface-200, #e9ecef);
      overflow-x: auto;

      .stage {
        display: flex;
        align-items: center;
        gap: 1rem;

        .arrow {
          font-size: 2rem;
          color: var(--color-surface-400, #ced4da);
        }

        .box {
          display: flex;
          flex-direction: column;
          align-items: center;
          padding: 1.5rem 2rem;
          background: var(--color-surface-50, #ffffff);
          border: 3px dashed var(--color-primary-400, #6b9b7a);
          border-radius: var(--radius-container, 0.5rem);
          box-shadow: 0 4px 6px -1px
            color-mix(in oklab, var(--color-surface-900) 0.1, transparent);

          .label {
            font-size: 0.875rem;
            color: var(--color-surface-600, #6c757d);
            text-transform: uppercase;
            letter-spacing: 0.05em;
          }

          .symbol {
            font-size: 2.5rem;
            color: var(--color-primary-600, #3a5a40);
          }
        }

        .machine {
          display: flex;
          flex-direction: column;
          align-items: center;
          padding: 1.5rem 2rem;
          background: var(--color-surface-700, #495057);
          border-radius: var(--radius-container, 0.5rem);
          color: var(--color-surface-50, #ffffff);

          .label {
            font-size: 1rem;
            font-weight: 600;
          }

          .icon {
            font-size: 2rem;
            margin-top: 0.5rem;
          }
        }

        .result {
          display: flex;
          flex-direction: column;
          align-items: center;
          padding: 1.5rem 2rem;
          background: var(--color-success-100, #d4edda);
          border-radius: var(--radius-container, 0.5rem);
          border: 2px solid var(--color-success-300, #a3cfbb);

          .formula {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-success-700, #2d5a30);
            font-family: "Consolas", "Monaco", monospace;
          }

          .label {
            font-size: 0.875rem;
            color: var(--color-surface-600, #6c757d);
            margin-top: 0.25rem;
          }
        }
      }
    }
  }

  /* Detective Scenario */
  #detective-math {
    .scenario {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      margin: 2rem 0;
      flex-wrap: wrap;

      .card {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1.25rem 1.75rem;
        background: var(--color-surface-50, #ffffff);
        border-radius: var(--radius-container, 0.5rem);
        box-shadow: 0 4px 12px
          color-mix(in oklab, var(--color-surface-900) 0.08, transparent);
        border: 2px solid var(--color-surface-200, #e9ecef);

        &.solved {
          background: var(--color-success-100, #d4edda);
          border-color: var(--color-success-300, #a3cfbb);
        }

        .icon {
          font-size: 2rem;
        }

        .content {
          .title {
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-surface-500, #adb5bd);
          }

          .data {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--color-surface-800, #343a40);
          }
        }
      }

      .arrow {
        font-size: 1.5rem;
        color: var(--color-surface-400, #ced4da);
      }
    }
  }

  /* Universal Crusher */
  #universal-crusher {
    .symbol {
      font-size: 1.2em;
      color: var(--color-primary-600, #3a5a40);
      font-weight: 600;
    }

    .demo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      margin: 2rem 0;
      padding: 2rem;
      background: var(--color-surface-100, #f1f3f5);
      border-radius: calc(var(--radius-container, 0.5rem) * 2);
      flex-wrap: wrap;

      .input-group {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;

        label {
          font-size: 1rem;
          font-weight: 600;
          color: var(--color-surface-600, #6c757d);
        }

        input {
          width: 80px;
          padding: 0.75rem;
          font-size: 1.5rem;
          text-align: center;
          border: 2px solid var(--color-surface-300, #dee2e6);
          border-radius: var(--radius-container, 0.5rem);
          background: var(--color-surface-50, #ffffff);

          &:focus {
            outline: none;
            border-color: var(--color-primary-500, #4a7c59);
            box-shadow: 0 0 0 3px
              color-mix(in oklab, var(--color-primary-500) 0.2, transparent);
          }
        }
      }

      .machine {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;

        .rules {
          display: flex;
          gap: 0.5rem;

          .btn {
            padding: 0.5rem 1rem;
            font-size: 1rem;
            font-family: "Consolas", "Monaco", monospace;
            border: 2px solid var(--color-surface-300, #dee2e6);
            border-radius: var(--radius-container, 0.5rem);
            background: var(--color-surface-50, #ffffff);
            cursor: pointer;
            transition: all 0.2s;

            &:hover {
              border-color: var(--color-primary-400, #6b9b7a);
              background: var(--color-primary-50, #e8f5e9);
            }

            &.active {
              background: var(--color-primary-600, #3a5a40);
              color: var(--color-surface-50, #ffffff);
              border-color: var(--color-primary-600, #3a5a40);
            }
          }
        }

        .body {
          font-size: 3rem;
        }
      }

      .output {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;

        .label {
          font-size: 1rem;
          font-weight: 600;
          color: var(--color-surface-600, #6c757d);
        }

        .value {
          font-size: 2.5rem;
          font-weight: 700;
          color: var(--color-success-700, #2d5a30);
          background: var(--color-success-100, #d4edda);
          padding: 0.5rem 1.5rem;
          border-radius: var(--radius-container, 0.5rem);
        }
      }
    }

    .insight {
      text-align: center;
      font-style: italic;
    }
  }

  /* Notation Evolution */
  #notation-evolution {
    .symbol {
      font-size: 1.2em;
      color: var(--color-primary-600, #3a5a40);
      font-weight: 600;
    }

    .evolution {
      margin: 2rem 0;
      display: flex;
      justify-content: center;

      .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.75rem;
        padding: 2rem 3rem;
        background: var(--color-surface-50, #ffffff);
        border-radius: calc(var(--radius-container, 0.5rem) * 2);
        box-shadow: 0 4px 12px
          color-mix(in oklab, var(--color-surface-900) 0.08, transparent);

        .old {
          font-size: 1.25rem;
          color: var(--color-surface-500, #adb5bd);
          text-decoration: line-through;
        }

        .arrow {
          font-size: 1.5rem;
          color: var(--color-primary-500, #4a7c59);
        }

        .new {
          font-size: 1.75rem;
          font-weight: 700;
          font-family: "Consolas", "Monaco", monospace;
          color: var(--color-primary-700, #2d5a30);
        }
      }
    }

    .reading-guide {
      margin: 2rem 0;
      padding: 1.5rem;
      background: var(--color-surface-50, #f8f9fa);
      border-radius: var(--radius-container, 0.5rem);

      p {
        margin: 0;
      }
    }
  }

  /* Practice */
  #practice {
    .cards {
      display: grid;
      gap: 1.5rem;

      .question {
        font-size: 1.25rem;
        line-height: 1.6;
        color: var(--color-surface-800, #343a40);
        margin-bottom: 1rem;
      }
    }
  }

  /* Responsive */
  @media (max-width: 1100px) {
    #container-metaphor .visual {
      flex-direction: column;

      .stage .arrow {
        transform: rotate(90deg);
      }
    }

    #detective-math .scenario {
      flex-direction: column;

      .arrow {
        transform: rotate(90deg);
      }
    }

    #universal-crusher .demo {
      flex-direction: column;
    }
  }
</style>
