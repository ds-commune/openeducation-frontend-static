<script lang="ts">
  import { Crisis, DefinitionCard, Summary } from "../../components";

  // Sheep-to-pebble simulation state
  let sheepInPen = $state<number[]>([]);
  const totalSheep = 7;

  function moveSheepToPen(sheepId: number) {
    if (!sheepInPen.includes(sheepId)) {
      sheepInPen = [...sheepInPen, sheepId];
    }
  }

  function removeSheepFromPen(sheepId: number) {
    sheepInPen = sheepInPen.filter((id) => id !== sheepId);
  }

  // Abstraction layers visualization
  let abstractionLevel = $state(0);
  const abstractionLevels = [
    { name: "–†–µ–∞–ª—å–Ω–æ—Å—Ç—å", icon: "üçé" },
    { name: "–°–∏–ª—É—ç—Ç—ã", icon: "‚¨§" },
    { name: "–¢–æ—á–∫–∏", icon: "‚óè" },
    { name: "–ß–∏—Å–ª–æ", icon: "5" },
  ];

  // Object type selector for "fiveness" demo
  let objectType = $state(0);
  const objectTypes = ["üçé", "üöó", "üåç", "‚öõÔ∏è"];
  const objectNames = ["–Ø–±–ª–æ–∫–∏", "–ú–∞—à–∏–Ω—ã", "–ü–ª–∞–Ω–µ—Ç—ã", "–ê—Ç–æ–º—ã"];
</script>

<svelte:head>
  <meta
    name="description"
    content="–£—Ä–æ–∫ –æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–∏ —á–∏—Å–µ–ª. –ö–∞–∫ –ª—é–¥–∏ –Ω–∞—É—á–∏–ª–∏—Å—å –æ—Ç–¥–µ–ª—è—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç –ø—Ä–µ–¥–º–µ—Ç–æ–≤."
  />
</svelte:head>

<section id="crisis">
  <Crisis icon="üêë" title="–ü—Ä–æ–±–ª–µ–º–∞ –±–æ–≥–∞—Ç–æ–≥–æ –ø–∞—Å—Ç—É—Ö–∞">
    <p>
      –ü–µ—Ä–µ–Ω–µ—Å—ë–º—Å—è –≤ –¥–æ–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫—É—é —ç–ø–æ—Ö—É. –¢—ã ‚Äî —Å—Ç–∞—Ä–æ—Å—Ç–∞ –ø–ª–µ–º–µ–Ω–∏. –£ —Ç–µ–±—è –æ–≥—Ä–æ–º–Ω–æ–µ
      —Å—Ç–∞–¥–æ –æ–≤–µ—Ü, –Ω–æ –≤ —è–∑—ã–∫–µ –Ω–µ—Ç —Å–ª–æ–≤ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞. –¢–æ–ª—å–∫–æ ¬´–æ–¥–∏–Ω¬ª,
      ¬´–¥–≤–∞¬ª –∏... ¬´–º–Ω–æ–≥–æ¬ª.
    </p>
    <p>
      –¢–µ–±–µ –Ω—É–∂–Ω–æ –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è —Å —Å–æ—Å–µ–¥–Ω–∏–º –ø–ª–µ–º–µ–Ω–µ–º –æ–± –æ–±–º–µ–Ω–µ –æ–≤–µ—Ü –Ω–∞ –∑–µ—Ä–Ω–æ. –ù–æ
      –∫–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ—Å–ª–∞–Ω–Ω–∏–∫—É <strong>—Ç–æ—á–Ω–æ–µ</strong> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–≤–µ—Ü, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—è
      —Å–∞–º–æ —Å—Ç–∞–¥–æ?
    </p>

    {#snippet question()}
      <strong>–ü–æ–ø—ã—Ç–∫–∏:</strong> –ü–∞–ª—å—Ü—ã? –ù–µ —Ö–≤–∞—Ç–∏—Ç —Ä—É–∫. –ó–∞—Ä—É–±–∫–∏ –Ω–∞ –ø–∞–ª–∫–µ? –î–æ–ª–≥–æ –∏ –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ.
      –ö–∞–º–µ—à–∫–∏ –≤ –º–µ—à–∫–µ? –ú–µ—à–æ–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Ç—è–∂—ë–ª—ã–º –¥–ª—è —Ç—ã—Å—è—á–∏ –æ–≤–µ—Ü.
    {/snippet}
  </Crisis>
</section>

<section id="intro">
  <div class="key-question">
    <p>
      <strong>–ì–ª–∞–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å:</strong> –∫–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å <em>—Å—É—Ç—å</em> –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞, –∏–∑–±–∞–≤–∏–≤—à–∏—Å—å
      –æ—Ç –≤–µ—Å–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤? –ö–∞–∫ ¬´–∑–∞–±—Ä–∞—Ç—å¬ª —á–∏—Å–ª–æ —É –æ–≤–µ—Ü, –Ω–µ –∑–∞–±–∏—Ä–∞—è —Å–∞–º–∏—Ö –æ–≤–µ—Ü?
    </p>
  </div>
</section>

<!-- Section 1: One-to-one correspondence -->
<section id="correspondence">
  <h2>–ü–∞—Ä—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è</h2>

  <p>
    –ü–µ—Ä–≤—ã–π —à–∞–≥ –∫ —á–∏—Å–ª—É ‚Äî –ø–æ–Ω—è—Ç—å, —á—Ç–æ –Ω–µ–≤–∞–∂–Ω–æ, <em>—á—Ç–æ</em> –º—ã —Å—á–∏—Ç–∞–µ–º. –í–∞–∂–µ–Ω —Å–∞–º —Ñ–∞–∫—Ç
    –Ω–∞–ª–∏—á–∏—è –ø–∞—Ä—ã ¬´–æ–±—ä–µ–∫—Ç ‚Äî –º–µ—Ç–∫–∞¬ª. –ö–∞–∂–¥–∞—è –æ–≤—Ü–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π –∫–∞–º–µ—à–µ–∫. –ö–∞–º–Ω–∏ —Ä–∞–∑–Ω—ã–µ,
    –æ–≤—Ü—ã —Ä–∞–∑–Ω—ã–µ ‚Äî –Ω–æ —Å–≤—è–∑—å –º–µ–∂–¥—É –Ω–∏–º–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–∞.
  </p>

  <div class="simulation" aria-label="–°–∏–º—É–ª—è—Ü–∏—è –ø–∞—Ä –æ–≤—Ü–∞-–∫–∞–º–µ–Ω—å">
    <div class="panel pasture">
      <h3>üåø –ü–∞—Å—Ç–±–∏—â–µ</h3>
      <div class="grid">
        {#each Array(totalSheep) as _, i}
          {#if !sheepInPen.includes(i)}
            <button
              class="item"
              onclick={() => moveSheepToPen(i)}
              aria-label="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ–≤—Ü—É {i + 1} –≤ –∑–∞–≥–æ–Ω"
            >
              üêë
            </button>
          {/if}
        {/each}
      </div>
    </div>

    <div class="arrow">‚Üí</div>

    <div class="panel pen">
      <h3>üè† –ó–∞–≥–æ–Ω</h3>
      <div class="grid">
        {#each sheepInPen as sheepId}
          <button
            class="item in-pen"
            onclick={() => removeSheepFromPen(sheepId)}
            aria-label="–í–µ—Ä–Ω—É—Ç—å –æ–≤—Ü—É –Ω–∞ –ø–∞—Å—Ç–±–∏—â–µ"
          >
            üêë
          </button>
        {/each}
      </div>
    </div>

    <div class="arrow">‚â°</div>

    <div class="panel cave">
      <h3>ü™® –ü–µ—â–µ—Ä–∞</h3>
      <div class="grid">
        {#each sheepInPen as _}
          <span class="pebble">‚¨§</span>
        {/each}
      </div>
    </div>
  </div>

  <p class="hint">
    –ù–∞–∂–º–∏ –Ω–∞ –æ–≤—Ü—É, —á—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –µ—ë –≤ –∑–∞–≥–æ–Ω. –ó–∞–º–µ—Ç—å: –∑–∞ –∫–∞–∂–¥–æ–π –æ–≤—Ü–æ–π
    –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–∞–º–µ–Ω—å. –ö—É—á–∞ –∫–∞–º–Ω–µ–π <strong>—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞</strong> —Å—Ç–∞–¥—É –æ–≤–µ—Ü –ø–æ —Å–≤–æ–π—Å—Ç–≤—É
    ¬´–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ¬ª, —Ö–æ—Ç—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –≤–µ—â–∏.
  </p>
</section>

<!-- Section 2: Abstraction -->
<section id="abstraction">
  <h2>–†–µ–Ω—Ç–≥–µ–Ω —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏</h2>

  <p>
    –†–µ—à–∞–µ–º –ø—Ä–æ–±–ª–µ–º—É —Ç—è–∂—ë–ª–æ–≥–æ –º–µ—à–∫–∞. –ú—ã –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ 5 –æ–≤–µ—Ü, 5 –∫–∞–º–Ω–µ–π –∏ 5 –∑–≤—ë–∑–¥
    –∏–º–µ—é—Ç —á—Ç–æ-—Ç–æ –æ–±—â–µ–µ. –≠—Ç–æ ¬´—á—Ç–æ-—Ç–æ¬ª ‚Äî –Ω–µ–≤–∏–¥–∏–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Å—Ç–∞—ë—Ç—Å—è,
    –µ—Å–ª–∏ –º—ã —É–±–µ—Ä—ë–º –≤—Å—é –º–∞—Ç–µ—Ä–∏—é.
  </p>

  <div class="demo">
    <div class="layers">
      <div class="display">
        {#if abstractionLevel === 0}
          <div class="row real">
            <span>üçé</span>
            <span>üçê</span>
            <span>üçä</span>
            <span>üçã</span>
            <span>üçá</span>
          </div>
        {:else if abstractionLevel === 1}
          <div class="row silhouette">
            <span>üçé</span>
            <span>üçê</span>
            <span>üçä</span>
            <span>üçã</span>
            <span>üçá</span>
          </div>
        {:else if abstractionLevel === 2}
          <div class="row dots">
            <span>‚Ä¢</span>
            <span>‚Ä¢</span>
            <span>‚Ä¢</span>
            <span>‚Ä¢</span>
            <span>‚Ä¢</span>
          </div>
        {:else}
          <div class="reveal">5</div>
        {/if}
      </div>

      <div class="controls">
        <input
          type="range"
          min="0"
          max="3"
          bind:value={abstractionLevel}
          aria-label="–£—Ä–æ–≤–µ–Ω—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏"
        />
        <div class="labels">
          {#each abstractionLevels as level, i}
            <span class:active={abstractionLevel === i}>{level.name}</span>
          {/each}
        </div>
      </div>
    </div>

    <p class="caption">
      –ü–µ—Ä–µ–¥–≤–∏–Ω—å –ø–æ–ª–∑—É–Ω–æ–∫: –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ ‚Üí –∫ —Å–∏–ª—É—ç—Ç–∞–º ‚Üí –∫ —Ç–æ—á–∫–∞–º ‚Üí –∫
      —á–∏—Å—Ç–æ–º—É —á–∏—Å–ª—É. <strong>–ß–∏—Å–ª–æ ‚Äî —ç—Ç–æ ¬´–¥—É—à–∞¬ª –∫—É—á–∏</strong>, –∫–æ—Ç–æ—Ä–∞—è –æ—Å—Ç–∞—ë—Ç—Å—è,
      –µ—Å–ª–∏ —É–±—Ä–∞—Ç—å –≤—Å—ë –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ.
    </p>
  </div>
</section>

<!-- Section 3: Fiveness -->
<section id="fiveness">
  <h2>¬´–ü—è—Ç—ë—Ä–æ—á–Ω–æ—Å—Ç—å¬ª</h2>

  <p>
    –í–≤–æ–¥–∏–º –∏–º–µ–Ω–∞ –¥–ª—è —ç—Ç–∏—Ö ¬´–¥—É—à¬ª. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –Ω–æ—Å–∏—Ç—å —Å —Å–æ–±–æ–π —ç—Ç–∞–ª–æ–Ω
    (–∫–∞–º–Ω–∏), –º—ã –¥–æ–≥–æ–≤–∞—Ä–∏–≤–∞–µ–º—Å—è –æ –∑–≤—É–∫–µ –∏–ª–∏ –∑–Ω–∞—á–∫–µ, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç –≤ –≥–æ–ª–æ–≤–µ
    –æ–±—Ä–∞–∑ –Ω—É–∂–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞.
  </p>

  <div class="demo">
    <div class="switcher">
      {#each objectTypes as obj, i}
        <button
          class="btn"
          class:active={objectType === i}
          onclick={() => (objectType = i)}
          aria-label="–ü–æ–∫–∞–∑–∞—Ç—å {objectNames[i]}"
        >
          {obj}
        </button>
      {/each}
    </div>

    <div class="display">
      <div class="dice">
        <span class="item">{objectTypes[objectType]}</span>
        <div class="row">
          <span class="item">{objectTypes[objectType]}</span>
          <span class="item">{objectTypes[objectType]}</span>
        </div>
        <div class="row">
          <span class="item">{objectTypes[objectType]}</span>
          <span class="item">{objectTypes[objectType]}</span>
        </div>
      </div>
      <div class="label">
        <span class="name">{objectNames[objectType]}</span>
        <span class="equals">=</span>
        <span class="number">5</span>
      </div>
    </div>

    <p class="insight">
      –ú–µ–Ω—è–µ—Ç—Å—è –∫–∞—Ä—Ç–∏–Ω–∫–∞, –Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–π. ¬´–ü—è—Ç—ë—Ä–æ—á–Ω–æ—Å—Ç—å¬ª
      (fiveness) –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –º—ã —Å—á–∏—Ç–∞–µ–º.
    </p>
  </div>
</section>

<!-- Section 4: Formalization -->
<section id="formal">
  <h2>–§–æ—Ä–º–∞–ª—å–Ω—ã–π —è–∑—ã–∫</h2>

  <DefinitionCard title="–ú–Ω–æ–∂–µ—Å—Ç–≤–æ">
    <p>–õ—é–±–∞—è —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å —Ä–∞–∑–ª–∏—á–∏–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤. –û–±–æ–∑–Ω–∞—á–∞–µ–º –±—É–∫–≤–∞–º–∏: A, B, C‚Ä¶</p>
  </DefinitionCard>

  <DefinitionCard title="–ú–æ—â–Ω–æ—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–∞">
    <p>
      –¢–æ —Å–∞–º–æ–µ ¬´–æ–±—â–µ–µ —Å–≤–æ–π—Å—Ç–≤–æ¬ª, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –≤—ã–¥–µ–ª–∏–ª–∏ ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
    </p>
    <div class="formula-container">
      <span class="formula">|A|</span> –∏–ª–∏
      <span class="formula">card(A)</span>
    </div>
    <p class="example">–ï—Å–ª–∏ A = &#123;—è–±–ª–æ–∫–æ, –≥—Ä—É—à–∞, —Å–ª–∏–≤–∞&#125;, —Ç–æ |A| = 3</p>
  </DefinitionCard>

  <div class="distinction">
    <div class="item">
      <div class="icon">üí≠</div>
      <div>
        <strong>–ß–∏—Å–ª–æ</strong> ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è –∏–¥–µ—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (—Å–º—ã—Å–ª)
      </div>
    </div>
    <div class="divider">vs</div>
    <div class="item">
      <div class="icon">‚úçÔ∏è</div>
      <div>
        <strong>–¶–∏—Ñ—Ä–∞</strong> ‚Äî –∑–Ω–∞—á–æ–∫ –¥–ª—è –∑–∞–ø–∏—Å–∏ —á–∏—Å–ª–∞ (—Å–∏–º–≤–æ–ª)
      </div>
    </div>
  </div>

  <p>
    –†–∞–∑–Ω–∏—Ü–∞ ‚Äî –∫–∞–∫ –º–µ–∂–¥—É —á–µ–ª–æ–≤–µ–∫–æ–º –∏ –µ–≥–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π. –§–æ—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ü–≤–µ—Ç–Ω—ã–º,
    —á—ë—Ä–Ω–æ-–±–µ–ª—ã–º, –±–æ–ª—å—à–∏–º –∏–ª–∏ –º–∞–ª–µ–Ω—å–∫–∏–º ‚Äî –Ω–æ —á–µ–ª–æ–≤–µ–∫ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ.
  </p>
</section>

<section id="summary">
  <Summary title="–ì–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å">
    <blockquote>
      –ß–∏—Å–ª–æ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–µ–¥–º–µ—Ç. –ß–∏—Å–ª–æ ‚Äî —ç—Ç–æ –æ–±—â–µ–µ —Å–≤–æ–π—Å—Ç–≤–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤,
      —Ç–∞–∫–æ–µ –∂–µ, –∫–∞–∫ —Ü–≤–µ—Ç –∏–ª–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –Ω–æ –æ—Ç–≤–µ—á–∞—é—â–µ–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å ¬´–°–∫–æ–ª—å–∫–æ?¬ª. –ú—ã
      –∏–∑–æ–±—Ä–µ–ª–∏ —á–∏—Å–ª–∞, —á—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é, –Ω–µ —Ç–∞—Å–∫–∞—è –µ—ë –∑–∞ —Å–æ–±–æ–π –≤
      –º–µ—à–∫–∞—Ö.
    </blockquote>
  </Summary>
</section>

<style>
  #crisis {
    p {
      margin-bottom: 1rem;
    }
  }

  #intro {
    .key-question {
      font-size: 1.5rem;
      text-align: center;
      padding: 1.5rem 2rem;
      background: var(--color-surface-100);
      border-radius: var(--radius-container);
      margin: 2rem 0 3rem;
    }
  }

  #correspondence {
    .simulation {
      display: flex;
      align-items: center;
      gap: 1rem;
      background: var(--color-surface-50);
      border: 2px solid var(--color-surface-200);
      border-radius: var(--radius-container);
      padding: 2rem;
      margin: 2rem 0;
      flex-wrap: wrap;
      justify-content: center;

      .panel {
        flex: 1;
        min-width: 140px;
        text-align: center;

        h3 {
          font-size: 1.125rem;
          margin-bottom: 1rem;
          color: var(--color-surface-700);
        }
      }

      .arrow {
        font-size: 2rem;
        color: var(--color-surface-400);
      }

      .grid {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        justify-content: center;
        min-height: 60px;
      }

      .item {
        font-size: 2rem;
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 0.25rem;
        transition: transform 0.2s;

        &:hover {
          transform: scale(1.2);
        }

        &.in-pen {
          filter: drop-shadow(0 0 4px var(--color-primary-400));
        }
      }

      .pebble {
        font-size: 1.5rem;
        color: var(--color-surface-600);
      }
    }

    .hint {
      font-size: 1.125rem;
      color: var(--color-surface-600);
      text-align: center;
      margin-top: 1rem;
    }

    @media (max-width: 1100px) {
      .simulation {
        flex-direction: column;
        gap: 1.5rem;
      }

      .arrow {
        transform: rotate(90deg);
      }
    }
  }

  #abstraction {
    .demo {
      background: var(--color-surface-50);
      border: 2px solid var(--color-surface-200);
      border-radius: var(--radius-container);
      padding: 2rem;
      margin: 2rem 0;
      text-align: center;

      .layers {
        .display {
          height: 120px;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 2rem;

          .row {
            display: flex;
            gap: 1.5rem;
            font-size: 3rem;

            &.silhouette span {
              filter: brightness(0) saturate(100%) opacity(0.6);
            }

            &.dots span {
              font-size: 2rem;
              color: var(--color-surface-700);
            }
          }

          .reveal {
            font-size: 4.5rem;
            font-weight: 700;
            color: var(--color-primary-600);
            animation: pulse 1s ease-in-out infinite alternate;
          }
        }

        .controls {
          max-width: 400px;
          margin: 0 auto;

          input[type="range"] {
            width: 100%;
            margin-bottom: 0.75rem;
            accent-color: var(--color-primary-500);
          }

          .labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: var(--color-surface-500);

            span.active {
              font-weight: 600;
              color: var(--color-primary-700);
            }
          }
        }
      }

      .caption {
        font-size: 1.125rem;
        color: var(--color-surface-600);
        margin: 1.5rem 0 0;
      }
    }

    @keyframes pulse {
      from {
        transform: scale(1);
      }
      to {
        transform: scale(1.1);
      }
    }

    @media (max-width: 1100px) {
      .demo {
        .layers {
          .display {
            height: 90px;

            .row {
              font-size: 2rem;
              gap: 0.75rem;
            }
            .reveal {
              font-size: 3.5rem;
            }
          }
        }
      }
    }
  }

  #fiveness {
    .demo {
      background: var(--color-surface-50);
      border: 2px solid var(--color-surface-200);
      border-radius: var(--radius-container);
      padding: 2rem;
      margin: 2rem 0;
      text-align: center;

      .switcher {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin-bottom: 2rem;

        .btn {
          font-size: 2rem;
          padding: 0.75rem 1rem;
          border: 2px solid var(--color-surface-300);
          border-radius: calc(var(--radius-container) * 0.5);
          background: white;
          cursor: pointer;
          transition: all 0.2s;

          &:hover {
            border-color: var(--color-primary-400);
          }

          &.active {
            border-color: var(--color-primary-600);
            background: var(--color-primary-50);
          }
        }
      }

      .display {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;

        .dice {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.5rem;

          .row {
            display: flex;
            gap: 2rem;
          }

          .item {
            font-size: 2.5rem;
          }
        }

        .label {
          display: flex;
          align-items: center;
          gap: 1rem;
          font-size: 1.5rem;

          .name {
            color: var(--color-surface-600);
          }

          .equals {
            color: var(--color-surface-400);
          }

          .number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--color-primary-600);
          }
        }
      }

      .insight {
        font-size: 1.125rem;
        color: var(--color-surface-600);
        margin: 1.5rem 0 0;
      }
    }

    @media (max-width: 1100px) {
      .demo .display .dice .item {
        font-size: 2rem;
      }
    }
  }

  #formal {
    .formula-container {
      background: white;
      padding: 1rem 1.5rem;
      border-radius: calc(var(--radius-container) * 0.5);
      display: inline-block;
      margin: 0.5rem 0;

      .formula {
        font-family: "Consolas", "Monaco", monospace;
        font-size: 1.375rem;
        color: var(--color-primary-700);
      }
    }

    .example {
      font-size: 1.125rem;
      color: var(--color-surface-600);
      margin-top: 0.5rem;
    }

    .distinction {
      display: flex;
      align-items: center;
      gap: 2rem;
      background: var(--color-surface-50);
      border: 2px solid var(--color-surface-200);
      border-radius: var(--radius-container);
      padding: 2rem;
      margin: 2rem 0;
      justify-content: center;

      .item {
        display: flex;
        align-items: center;
        gap: 1rem;
        font-size: 1.25rem;

        .icon {
          font-size: 2rem;
        }
      }

      .divider {
        font-size: 1.125rem;
        color: var(--color-surface-400);
        font-weight: 600;
      }
    }

    @media (max-width: 1100px) {
      .distinction {
        flex-direction: column;
        gap: 1rem;
      }
    }
  }
</style>
